# Cache MCP Server Environment Configuration
# Copy this file to .env and update with your values

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL Database Settings
CACHE_DB_HOST=localhost
CACHE_DB_PORT=5432
CACHE_DB_NAME=paddle_plugin_cache
CACHE_DB_USER=postgres
CACHE_DB_PASSWORD=2001
CACHE_DB_SSL_MODE=prefer

# Database Connection Pool
CACHE_DB_POOL_SIZE=20
CACHE_DB_POOL_MIN_SIZE=5
CACHE_DB_POOL_MAX_SIZE=20
CACHE_DB_POOL_TIMEOUT=30
CACHE_DB_POOL_RECYCLE=3600

# Database Persistence
CACHE_PERSIST_DIR=./cache_storage

# =============================================================================
# MCP Server Configuration
# =============================================================================

# Server Settings
MCP_HOST=0.0.0.0
MCP_PORT=8080
MCP_PROTOCOL=http
MCP_MAX_CONNECTIONS=100
MCP_REQUEST_TIMEOUT=30

# Authentication
MCP_AUTH_ENABLED=false
MCP_API_KEY=
MCP_JWT_SECRET=

# SSL Configuration
MCP_SSL_ENABLED=false
MCP_SSL_CERT_PATH=
MCP_SSL_KEY_PATH=

# =============================================================================
# Cache Configuration
# =============================================================================

# Cache Backend
CACHE_BACKEND=pgvector

# Predictive Cache Settings
PREDICTIVE_CACHE_ENABLED=true
PREDICTIVE_CACHE_TTL=3600
PREDICTIVE_CACHE_MAX_SIZE=1000
PREDICTIVE_CACHE_PREDICTION_WINDOW=300
PREDICTIVE_CACHE_CONFIDENCE_THRESHOLD=0.7

# Semantic Cache Settings
SEMANTIC_CACHE_ENABLED=true
SEMANTIC_CACHE_TTL=86400
SEMANTIC_CACHE_MAX_SIZE=5000
SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.8
SEMANTIC_CACHE_EMBEDDING_MODEL=all-MiniLM-L6-v2
SEMANTIC_CACHE_EMBEDDING_DIMENSION=384

# Vector Cache Settings
VECTOR_CACHE_ENABLED=true
VECTOR_CACHE_TTL=7200
VECTOR_CACHE_MAX_SIZE=2000
VECTOR_CACHE_SIMILARITY_THRESHOLD=0.75
VECTOR_CACHE_EMBEDDING_DIMENSION=1536
VECTOR_CACHE_RERANKING_ENABLED=true

# Global Cache Settings
GLOBAL_CACHE_ENABLED=true
GLOBAL_CACHE_TTL=86400
GLOBAL_CACHE_MAX_SIZE=5000
GLOBAL_CACHE_FALLBACK_ENABLED=true

# Vector Diary Settings
VECTOR_DIARY_ENABLED=true
VECTOR_DIARY_TTL=2592000
VECTOR_DIARY_MAX_SIZE=10000
VECTOR_DIARY_CLEANUP_INTERVAL=86400

# =============================================================================
# Performance Configuration
# =============================================================================

# Performance Settings
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT=30
ENABLE_METRICS=true
METRICS_INTERVAL=60

# Cache Optimization
CACHE_INVALIDATION_ENABLED=true
CLEANUP_INTERVAL=3600
MAX_CONCURRENT_OPERATIONS=100

# =============================================================================
# Integration Configuration
# =============================================================================

# MCP RAG Server Integration
MCP_RAG_SERVER_ENABLED=true
MCP_RAG_SERVER_ENDPOINT=http://localhost:8001
MCP_RAG_SERVER_TIMEOUT=30
MCP_RAG_SERVER_FALLBACK_ENABLED=true

# Vector Store MCP Integration
VECTOR_STORE_MCP_ENABLED=true
VECTOR_STORE_MCP_ENDPOINT=http://localhost:8002
VECTOR_STORE_MCP_TIMEOUT=30
VECTOR_STORE_MCP_FALLBACK_ENABLED=true

# Memory Bank Integration
MEMORY_BANK_SYNC_ENABLED=true
MEMORY_BANK_SYNC_INTERVAL=300
MEMORY_BANK_SYNC_DIRECTION=bidirectional

# KiloCode Integration
KILOCODE_ROUTING_ENABLED=true
KILOCODE_FALLBACK_ORDER=predictive,semantic,vector,global

# =============================================================================
# Security Configuration
# =============================================================================

# Rate Limiting
RATE_LIMITING_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_LIMIT=20

# Input Validation
INPUT_VALIDATION_ENABLED=true
MAX_KEY_LENGTH=255
MAX_VALUE_SIZE=10485760

# =============================================================================
# Logging Configuration
# =============================================================================

# Logging Settings
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=./logs/cache_mcp_server.log
LOG_MAX_SIZE=10485760
LOG_BACKUP_COUNT=5

# Access Logging
ACCESS_LOG_ENABLED=true
ACCESS_LOG_FILE=./logs/cache_access.log

# Error Logging
ERROR_LOG_ENABLED=true
ERROR_LOG_FILE=./logs/cache_errors.log

# =============================================================================
# Development Configuration
# =============================================================================

# Development Settings
DEBUG_MODE=false
TEST_MODE=false
MOCK_DATA=false

# Development Database
DEV_DATABASE_URL=sqlite:///./cache_dev.db

# Testing
TEST_TIMEOUT=30
TEST_PARALLELISM=4
COVERAGE_THRESHOLD=0.8

# =============================================================================
# Monitoring and Health Checks
# =============================================================================

# Health Check Settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=300
HEALTH_CHECK_TIMEOUT=10

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_THRESHOLD_RESPONSE_TIME=1000
PERFORMANCE_THRESHOLD_ERROR_RATE=0.05
PERFORMANCE_THRESHOLD_MEMORY_USAGE=0.8

# Alerting
ALERTING_ENABLED=true
ALERT_ERROR_RATE_THRESHOLD=0.1
ALERT_RESPONSE_TIME_THRESHOLD=2000
ALERT_MEMORY_USAGE_THRESHOLD=0.9

# =============================================================================
# Backup and Maintenance
# =============================================================================

# Backup Settings
BACKUP_ENABLED=true
BACKUP_INTERVAL=86400
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true

# Maintenance
MAINTENANCE_ENABLED=true
MAINTENANCE_INTERVAL=3600
MAINTENANCE_CLEANUP_EXPIRED=true
MAINTENANCE_OPTIMIZE_INDEXES=true

# =============================================================================
# External Services
# =============================================================================

# Simba Integration (for embeddings)
SIMBA_ENABLED=false
SIMBA_API_KEY=
SIMBA_ENDPOINT=http://localhost:8000
SIMBA_EMBEDDING_MODEL=all-MiniLM-L6-v2

# Redis (for additional caching)
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# Feature Flags
# =============================================================================

# Feature Flags
ENABLE_PREDICTIVE_CACHE=true
ENABLE_SEMANTIC_CACHE=true
ENABLE_VECTOR_CACHE=true
ENABLE_GLOBAL_CACHE=true
ENABLE_VECTOR_DIARY=true
ENABLE_AUTO_TUNING=true
ENABLE_ADAPTIVE_TTL=true
ENABLE_PREDICTIVE_PRELOADING=true
ENABLE_INTELLIGENT_EVICTION=true
ENABLE_CROSS_LAYER_COORDINATION=true
ENABLE_REAL_TIME_SYNCHRONIZATION=true

# =============================================================================
# Advanced Configuration
# =============================================================================

# Vector Search Settings
VECTOR_SEARCH_EF=50
VECTOR_SEARCH_CONSTRUCTION_EF=200
VECTOR_SEARCH_INDEX_TYPE=hnsw

# Embedding Settings
EMBEDDING_BATCH_SIZE=32
EMBEDDING_DEVICE=cpu
EMBEDDING_MAX_LENGTH=512

# Cache Eviction Settings
EVICTION_POLICY=lru
EVICTION_THRESHOLD=0.8

# Memory Management
MEMORY_IMPORTANCE_THRESHOLD=0.3
MEMORY_DECAY_FACTOR=0.95
MEMORY_MAX_RELATIONSHIPS=10

# =============================================================================
# Network Configuration
# =============================================================================

# Network Settings
NETWORK_TIMEOUT=30
NETWORK_MAX_RETRIES=3
NETWORK_RETRY_DELAY=1
NETWORK_CIRCUIT_BREAKER_THRESHOLD=0.1

# Load Balancing
LOAD_BALANCER_ENABLED=true
LOAD_BALANCER_STRATEGY=round_robin
LOAD_BALANCER_HEALTH_CHECK_INTERVAL=300

# =============================================================================
# Experimental Features
# =============================================================================

# Experimental Settings
EXPERIMENTAL_ENABLED=false
EXPERIMENTAL_FEATURES=
EXPERIMENTAL_THRESHOLD=0.5

# AI/ML Features
ML_ENABLED=false
ML_MODEL_PATH=./models
ML_TRAINING_INTERVAL=3600
ML_PREDICTION_THRESHOLD=0.7

# =============================================================================
# Environment Specific Settings
# =============================================================================

# Development Environment
DEV_DATABASE_URL=sqlite:///./cache_dev.db
DEV_LOG_LEVEL=DEBUG
DEV_MOCK_DATA=true

# Staging Environment
STAGING_DATABASE_URL=postgresql://postgres:2001@localhost:5432/paddle_plugin_cache_staging
STAGING_LOG_LEVEL=INFO
STAGING_MOCK_DATA=false

# Production Environment
PROD_DATABASE_URL=postgresql://postgres:2001@prod-db:5432/paddle_plugin_cache
PROD_LOG_LEVEL=WARNING
PROD_MOCK_DATA=false
PROD_BACKUP_ENABLED=true
PROD_MONITORING_ENABLED=true

# =============================================================================
# Custom Configuration
# =============================================================================

# Add any custom configuration variables below
# CUSTOM_SETTING_1=
# CUSTOM_SETTING_2=